services:
  client:
    image: autocircled/key-hub-front:3.0
    restart: always
    container_name: client
    ports:
      - 5174:80
    networks:
      - mongo-net
  
  server:
    image: autocircled/key-hub:2.8
    restart: always
    container_name: server
    ports:
      - 3001:3000
    volumes:
      - keyhub-data:/var/key-hub
    environment:
      - NODE_ENV=production
      - MONGO_URI=${MONGO_URI}
      - TELEGRAM_API=${TELEGRAM_API}
      - TELEGRAM_ADMIN_ID=${TELEGRAM_ADMIN_ID}
    networks:
      - mongo-net

volumes:
  mongo-data:
    driver: local
  keyhub-data:
    driver: local

networks:
  mongo-net:
    driver: bridge